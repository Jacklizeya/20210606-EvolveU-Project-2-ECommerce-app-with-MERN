{"ast":null,"code":"import _toConsumableArray from\"/home/jack/Desktop/Software Codebase/20210514 E-Commerce Version1/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/jack/Desktop/Software Codebase/20210514 E-Commerce Version1/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from\"react-router-dom\";import{Row,Col,Image,ListGroup,Card,Button,Form}from\"react-bootstrap\";import Rating from\"../components/Rating\";import{useDispatch,useSelector}from\"react-redux\";// import products from \"../products\"\n// import axios from \"axios\"\nimport{listProductDetails,createProductReview}from\"../actions/productAction\";import Message from\"../components/Message\";import Loader from\"../components/Loader\";import Meta from\"../components/Meta\";import{PRODUCT_CREATE_REVIEW_RESET}from\"../constants/productConstants\";// props.match is the url in the react system\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductScreen=function ProductScreen(_ref){var history=_ref.history,match=_ref.match;// const [product, setProduct] = useState({})\n//  There are lots of limitation to useEffect, 1st argument is function, cannot use Async there, have to define one, then invoke it\n//  for axios, response.data is the one we want \nvar dispatch=useDispatch();var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];var productDetails=useSelector(function(state){return state.productDetails;});// state ---- reducer ---- loading, error, product\nvar loading=productDetails.loading,error=productDetails.error,product=productDetails.product;// destruction a good way to extra data \nvar productCreateReview=useSelector(function(state){return state.productCreateReview;});// state ---- reducer ---- loading, error, product\nvar successProductReview=productCreateReview.success,errorProductReview=productCreateReview.error;// destruction a good way to extra data \nvar userLogin=useSelector(function(state){return state.userLogin;});// state ---- reducer ---- loading, error, product\nvar userInfo=userLogin.userInfo;// destruction a good way to extra data \nuseEffect(function(){// const fetchProduct = async () => {const {data} = await axios.get(`/api/products/${match.params.id}`); setProduct(data)}\n// fetchProduct();\nif(successProductReview){alert(\"Review Submitted\");setRating(0);setComment(\"\");dispatch({type:PRODUCT_CREATE_REVIEW_RESET});}dispatch(listProductDetails(match.params.id));},[match,dispatch,successProductReview]);// const product = products.find(product => product._id === match.params.id)\nvar addToCartHandler=function addToCartHandler(){console.log(\"start Redirecting to cart page\");history.push(\"/cart/\".concat(match.params.id,\"?qty=\").concat(qty));};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(createProductReview(match.params.id,{rating:rating,comment:comment}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-light my-3\",to:\"/\",children:\" Go Back \"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error,\" \"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Meta,{title:product.name}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsx(Image,{src:product.image,alt:product.name,fluid:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h3\",{children:[\" \",product.name,\" \"]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Rating,{value:product.rating,text:\"\".concat(product.numReviews,\" reviews\")})}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Price: $\",product.price]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[\"Description: $\",product.description]})]})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Price:\"}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",product.price,\" \"]})})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Status:\"}),/*#__PURE__*/_jsx(Col,{children:product.countInStock>0?\"In Stock\":\"Out of Stock\"})]})}),product.countInStock>0&&/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Qty\"}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:qty,onChange:function onChange(e){console.log(\"change\");setQty(Number(e.target.value));},children:_toConsumableArray(Array(product.countInStock).keys()).map(function(num){return/*#__PURE__*/_jsx(\"option\",{value:num+1,children:num+1},num+1);})})})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{className:\"btn-block\",type:\"button\",disabled:product.countInStock===0,onClick:addToCartHandler,children:\"Add to cart\"})})]})})})]}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{md:6,children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Reviews \"}),product.reviews.length===0&&/*#__PURE__*/_jsx(Message,{children:\" No Reviews \"}),/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Test \"}),product.reviews.map(function(review){return/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\" \",review.name,\" \"]}),/*#__PURE__*/_jsx(Rating,{value:review.rating,children:\" \"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",review.createdAt.substring(0,10),\"  \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",review.comment,\"  \"]})]},review._id);}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\" Write a customer review \"}),errorProductReview&&/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",errorProductReview,\" \"]}),userInfo?/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"rating\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Rating \"}),/*#__PURE__*/_jsxs(Form.Control,{as:\"select\",value:rating,onChange:function onChange(e){return setRating(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\" Select... \"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\" 1 - Poor \"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\" 2 - Fair \"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\" 3 - Good \"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\" 4 - Very Good \"}),/*#__PURE__*/_jsx(\"option\",{value:\"5\",children:\" 5 - Excellent \"})]})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"comment\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\" Comment \"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",row:\"3\",value:comment,onChange:function onChange(e){setComment(e.target.value);},children:\" Comment \"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"primary\",children:\" Submit Reivews \"})]}):/*#__PURE__*/_jsxs(Message,{children:[\" Please \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\" sign in \"}),\" to write a review \",'',\" \"]})]})]})]})})]})]});};export default ProductScreen;// The match object in router case\n// import is more like file path\n// to is url\n// In react, when you talk about src, it means something in the public folder","map":{"version":3,"sources":["/home/jack/Desktop/Software Codebase/20210514 E-Commerce Version1/frontend/src/screens/ProductScreen.js"],"names":["React","useState","useEffect","Link","Row","Col","Image","ListGroup","Card","Button","Form","Rating","useDispatch","useSelector","listProductDetails","createProductReview","Message","Loader","Meta","PRODUCT_CREATE_REVIEW_RESET","ProductScreen","history","match","dispatch","qty","setQty","rating","setRating","comment","setComment","productDetails","state","loading","error","product","productCreateReview","successProductReview","success","errorProductReview","userLogin","userInfo","alert","type","params","id","addToCartHandler","console","log","push","submitHandler","e","preventDefault","name","image","numReviews","price","description","countInStock","Number","target","value","Array","keys","map","num","reviews","length","review","createdAt","substring","_id"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport {Link} from \"react-router-dom\"\nimport {Row, Col, Image, ListGroup, Card, Button, Form} from \"react-bootstrap\"\nimport Rating from \"../components/Rating\"\nimport {useDispatch, useSelector} from \"react-redux\"\n// import products from \"../products\"\n// import axios from \"axios\"\nimport {listProductDetails, createProductReview} from \"../actions/productAction\"\nimport Message from  \"../components/Message\"\nimport Loader from  \"../components/Loader\"\nimport Meta from \"../components/Meta\"\nimport {PRODUCT_CREATE_REVIEW_RESET} from \"../constants/productConstants\"\n\n// props.match is the url in the react system\nconst ProductScreen = ({history, match}) => {\n    // const [product, setProduct] = useState({})\n//  There are lots of limitation to useEffect, 1st argument is function, cannot use Async there, have to define one, then invoke it\n//  for axios, response.data is the one we want \n    const dispatch = useDispatch()\n\n\n    const [qty, setQty] = useState(1)\n    const [rating, setRating] = useState(0)\n    const [comment, setComment] = useState(\"\")\n\n    const productDetails = useSelector(state => state.productDetails)\n    // state ---- reducer ---- loading, error, product\n    const {loading, error, product} = productDetails // destruction a good way to extra data \n\n    const productCreateReview = useSelector(state => state.productCreateReview)\n    // state ---- reducer ---- loading, error, product\n    const {success: successProductReview, error: errorProductReview, } = productCreateReview // destruction a good way to extra data \n\n    const userLogin = useSelector(state => state.userLogin)\n    // state ---- reducer ---- loading, error, product\n    const { userInfo } = userLogin // destruction a good way to extra data \n\n    useEffect( ()=> {\n        // const fetchProduct = async () => {const {data} = await axios.get(`/api/products/${match.params.id}`); setProduct(data)}\n        // fetchProduct();\n        if (successProductReview) {\n            alert(\"Review Submitted\")\n            setRating(0)\n            setComment(\"\")\n            dispatch({type: PRODUCT_CREATE_REVIEW_RESET})\n        }\n\n        dispatch(listProductDetails(match.params.id))\n    }, [match, dispatch, successProductReview])\n\n    // const product = products.find(product => product._id === match.params.id)\n\n    const addToCartHandler = () => {\n        console.log(\"start Redirecting to cart page\")\n        history.push(`/cart/${match.params.id}?qty=${qty}`)\n    }\n\n\n    const submitHandler = (e) => {\n        e.preventDefault()\n        dispatch(createProductReview(match.params.id, {rating, comment}))\n    }\n\n    \n    return (\n        \n        <div>\n           \n            <Link className = \"btn btn-light my-3\" to=\"/\"> Go Back </Link>\n\n            {loading? <Loader/> : error? <Message variant=\"danger\"> {error} </Message> : (\n                <>\n                <Meta title={product.name}/>\n                <Row>\n                <Col md={6}>\n                    <Image src={product.image} alt={product.name} fluid/>\n                </Col>\n\n                <Col md={3}>\n                    <ListGroup variant = \"flush\"> \n                        <ListGroup.Item>\n                            <h3> {product.name} </h3>\n                        </ListGroup.Item>\n                        <ListGroup.Item>\n                            <Rating value={product.rating} text={`${product.numReviews} reviews`}/>\n                        </ListGroup.Item>\n                        <ListGroup.Item>\n                            Price: ${product.price}\n                        </ListGroup.Item>\n                        <ListGroup.Item>\n                            Description: ${product.description}\n                        </ListGroup.Item>\n                    </ListGroup>\n                </Col>\n                \n                <Col md={3}>\n                    <Card>\n                        <ListGroup variant=\"flush\">\n                            <ListGroup.Item> \n                                <Row>\n                                    <Col>\n                                        Price:\n                                    </Col>\n                                    <Col>\n                                        <strong> {product.price} </strong>\n                                    </Col>\n                                </Row>\n                            </ListGroup.Item>\n                            <ListGroup.Item> \n                                <Row>\n                                    <Col>\n                                        Status:\n                                    </Col>\n                                    <Col>\n                                        {product.countInStock > 0? \"In Stock\" : \"Out of Stock\"}\n                                    </Col>\n                                </Row>\n                            </ListGroup.Item>\n\n                            {product.countInStock > 0 && (\n                                <ListGroup.Item>\n                                    <Row>\n                                        <Col>Qty</Col>\n                                        <Col> \n                                            <Form.Control as=\"select\" value={qty} onChange={(e)=>{console.log(\"change\"); setQty(Number(e.target.value))}}> \n                                                {[...Array(product.countInStock).keys()].map(\n                                                    (num) => (<option key={num+1} value={num+1}> \n                                                            {num+1}\n                                                        </option>))}\n                                            </Form.Control>\n                                        </Col>\n                                    </Row>\n                                </ListGroup.Item>\n                            )}\n\n                            <ListGroup.Item>                           \n                                <Button \n                                className= \"btn-block\" \n                                type=\"button\" \n                                disabled={product.countInStock === 0}\n                                onClick = {addToCartHandler}\n                                >\n                                    Add to cart\n                                </Button> \n                            </ListGroup.Item>\n                        </ListGroup>\n                    </Card>\n                </Col>\n            </Row>\n            <Row>\n                <Col md={6}>\n                    <h2> Reviews </h2>\n                    {product.reviews.length === 0 && <Message> No Reviews </Message>}      \n                    <ListGroup variant=\"flush\"> \n                    <h2> Test </h2>\n                            {product.reviews.map(review => \n                                    (\n                                        <ListGroup.Item key={review._id}>\n                                            <strong> {review.name} </strong>\n                                            <Rating value={review.rating}> </Rating>\n                                            <p> {review.createdAt.substring(0, 10)}  </p>\n                                            <p> {review.comment}  </p>\n                                        </ListGroup.Item>\n                                    )\n                            )}\n                            <ListGroup.Item>\n                                <h2> Write a customer review </h2>\n                                {errorProductReview && <Message variant=\"danger\"> {errorProductReview} </Message> }\n                                {userInfo? (\n                                    <Form onSubmit = {submitHandler}> \n                                        <Form.Group controlId=\"rating\">\n                                            <Form.Label> Rating </Form.Label>\n                                            <Form.Control as=\"select\" value={rating} onChange={e => setRating(e.target.value)}>\n                                            \n                                                <option value=\"\"> Select... </option>\n                                                <option value=\"1\"> 1 - Poor </option>\n                                                <option value=\"2\"> 2 - Fair </option>\n                                                <option value=\"3\"> 3 - Good </option>\n                                                <option value=\"4\"> 4 - Very Good </option>\n                                                <option value=\"5\"> 5 - Excellent </option>\n\n                                            </Form.Control>\n                                        </Form.Group>\n                                        <Form.Group controlId=\"comment\">\n                                            <Form.Label> Comment </Form.Label>\n                                            <Form.Control as=\"textarea\" row=\"3\" value={comment} onChange = {(e)=>{setComment(e.target.value)}}> Comment </Form.Control>\n                                        </Form.Group>\n                                        <Button type=\"submit\" variant=\"primary\"> Submit Reivews </Button>\n                                    </Form>) :\n                                (<Message> Please <Link to=\"/login\"> sign in </Link> to write a review {''} </Message> )}\n                            </ListGroup.Item>\n                    </ListGroup>                              \n                </Col>\n            </Row>\n            </>\n            )}\n    \n        </div>\n    )\n}\n\nexport default ProductScreen\n\n\n// The match object in router case\n// import is more like file path\n// to is url\n// In react, when you talk about src, it means something in the public folder"]},"metadata":{},"sourceType":"module"}