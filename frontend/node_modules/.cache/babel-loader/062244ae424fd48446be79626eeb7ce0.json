{"ast":null,"code":"var _jsxFileName = \"C:\\\\DATA\\\\EvolveU\\\\PROJECT II\\\\Project2ECommerce\\\\frontend\\\\src\\\\screens\\\\ProductScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { Row, Col, Image, ListGroup, Card, Button, Form } from \"react-bootstrap\";\nimport Rating from \"../components/Rating\";\nimport { useDispatch, useSelector } from \"react-redux\"; // import products from \"../products\"\n// import axios from \"axios\"\n\nimport { listProductDetails, createProductReview } from \"../actions/productAction\";\nimport Message from \"../components/Message\";\nimport Loader from \"../components/Loader\";\nimport Meta from \"../components/Meta\";\nimport { PRODUCT_CREATE_REVIEW_RESET } from \"../constants/productConstants\"; // props.match is the url in the react system\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ProductScreen = ({\n  history,\n  match\n}) => {\n  _s();\n\n  // const [product, setProduct] = useState({})\n  //  There are lots of limitation to useEffect, 1st argument is function, cannot use Async there, have to define one, then invoke it\n  //  for axios, response.data is the one we want \n  const dispatch = useDispatch();\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState(\"\");\n  const productDetails = useSelector(state => state.productDetails); // state ---- reducer ---- loading, error, product\n\n  const {\n    loading,\n    error,\n    product\n  } = productDetails; // destruction a good way to extra data \n\n  const productCreateReview = useSelector(state => state.productCreateReview); // state ---- reducer ---- loading, error, product\n\n  const {\n    success: successProductReview,\n    error: errorProductReview\n  } = productCreateReview; // destruction a good way to extra data \n\n  const userLogin = useSelector(state => state.userLogin); // state ---- reducer ---- loading, error, product\n\n  const {\n    userInfo\n  } = userLogin; // destruction a good way to extra data \n\n  useEffect(() => {\n    // const fetchProduct = async () => {const {data} = await axios.get(`/api/products/${match.params.id}`); setProduct(data)}\n    // fetchProduct();\n    if (successProductReview) {\n      alert(\"Review Submitted\");\n      setRating(0);\n      setComment(\"\");\n      dispatch({\n        type: PRODUCT_CREATE_REVIEW_RESET\n      });\n    }\n\n    dispatch(listProductDetails(match.params.id));\n  }, [match, dispatch, successProductReview]); // const product = products.find(product => product._id === match.params.id)\n\n  const addToCartHandler = () => {\n    console.log(\"start Redirecting to cart page\");\n    history.push(`/cart/${match.params.id}?qty=${qty}`);\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(createProductReview(match.params.id, {\n      rating,\n      comment\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      className: \"btn btn-light my-3\",\n      to: \"/\",\n      children: \" Go Back \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this), loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 23\n    }, this) : error ? /*#__PURE__*/_jsxDEV(Message, {\n      variant: \"danger\",\n      children: [\" \", error, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 42\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Meta, {\n        title: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: /*#__PURE__*/_jsxDEV(Image, {\n            src: product.image,\n            alt: product.name,\n            fluid: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 3,\n          children: /*#__PURE__*/_jsxDEV(ListGroup, {\n            variant: \"flush\",\n            children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: [\" \", product.name, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: /*#__PURE__*/_jsxDEV(Rating, {\n                value: product.rating,\n                text: `${product.numReviews} reviews`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 85,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: [\"Price: $\", product.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: [\"Description: $\", product.description]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 3,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(ListGroup, {\n              variant: \"flush\",\n              children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"Price:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: [\" \", product.price, \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 105,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 100,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"Status:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: product.countInStock > 0 ? \"In Stock\" : \"Out of Stock\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 29\n              }, this), product.countInStock > 0 && /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    children: \"Qty\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                      as: \"select\",\n                      value: qty,\n                      onChange: e => {\n                        console.log(\"change\");\n                        setQty(Number(e.target.value));\n                      },\n                      children: [...Array(product.countInStock).keys()].map(num => /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: num + 1,\n                        children: num + 1\n                      }, num + 1, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 127,\n                        columnNumber: 63\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 125,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 124,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"btn-block\",\n                  type: \"button\",\n                  disabled: product.countInStock === 0,\n                  onClick: addToCartHandler,\n                  children: \"Add to cart\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: 6,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \" Reviews \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 21\n          }, this), product.reviews.length === 0 && /*#__PURE__*/_jsxDEV(Message, {\n            children: \" No Reviews \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 54\n          }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n            variant: \"flush\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \" Test \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 21\n            }, this), product.reviews.map(review => /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [\" \", review.name, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(Rating, {\n                value: review.rating,\n                children: \" \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\" \", review.createdAt.substring(0, 10), \"  \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\" \", review.comment, \"  \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 45\n              }, this)]\n            }, review._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 41\n            }, this)), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \" Write a customer review \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 33\n              }, this), errorProductReview && /*#__PURE__*/_jsxDEV(Message, {\n                variant: \"danger\",\n                children: [\" \", errorProductReview, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 56\n              }, this), userInfo ? /*#__PURE__*/_jsxDEV(Form, {\n                onSubmit: submitHandler,\n                children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                  controlId: \"rating\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \" Rating \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    as: \"select\",\n                    value: rating,\n                    onChange: e => setRating(e.target.value),\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \" Select... \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 175,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"1\",\n                      children: \" 1 - Poor \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"2\",\n                      children: \" 2 - Fair \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 177,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"3\",\n                      children: \" 3 - Good \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 178,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"4\",\n                      children: \" 4 - Very Good \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 179,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"5\",\n                      children: \" 5 - Excellent \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 180,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 173,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  controlId: \"comment\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \" Comment \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    as: \"textarea\",\n                    row: \"3\",\n                    value: comment,\n                    onChange: e => {\n                      setComment(e.target.value);\n                    },\n                    children: \" Comment \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  variant: \"primary\",\n                  children: \" Submit Reivews \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(Message, {\n                children: [\" Please \", /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/login\",\n                  children: \" sign in \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 51\n                }, this), \" to write a review \", '', \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 34\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProductScreen, \"XyCTnDGhydiqbnlPoUvCcdLtRcA=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector];\n});\n\n_c = ProductScreen;\nexport default ProductScreen; // The match object in router case\n// import is more like file path\n// to is url\n// In react, when you talk about src, it means something in the public folder\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductScreen\");","map":{"version":3,"sources":["C:/DATA/EvolveU/PROJECT II/Project2ECommerce/frontend/src/screens/ProductScreen.js"],"names":["React","useState","useEffect","Link","Row","Col","Image","ListGroup","Card","Button","Form","Rating","useDispatch","useSelector","listProductDetails","createProductReview","Message","Loader","Meta","PRODUCT_CREATE_REVIEW_RESET","ProductScreen","history","match","dispatch","qty","setQty","rating","setRating","comment","setComment","productDetails","state","loading","error","product","productCreateReview","success","successProductReview","errorProductReview","userLogin","userInfo","alert","type","params","id","addToCartHandler","console","log","push","submitHandler","e","preventDefault","name","image","numReviews","price","description","countInStock","Number","target","value","Array","keys","map","num","reviews","length","review","createdAt","substring","_id"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport {Link} from \"react-router-dom\"\r\nimport {Row, Col, Image, ListGroup, Card, Button, Form} from \"react-bootstrap\"\r\nimport Rating from \"../components/Rating\"\r\nimport {useDispatch, useSelector} from \"react-redux\"\r\n// import products from \"../products\"\r\n// import axios from \"axios\"\r\nimport {listProductDetails, createProductReview} from \"../actions/productAction\"\r\nimport Message from  \"../components/Message\"\r\nimport Loader from  \"../components/Loader\"\r\nimport Meta from \"../components/Meta\"\r\nimport {PRODUCT_CREATE_REVIEW_RESET} from \"../constants/productConstants\"\r\n\r\n// props.match is the url in the react system\r\nconst ProductScreen = ({history, match}) => {\r\n    // const [product, setProduct] = useState({})\r\n//  There are lots of limitation to useEffect, 1st argument is function, cannot use Async there, have to define one, then invoke it\r\n//  for axios, response.data is the one we want \r\n    const dispatch = useDispatch()\r\n\r\n\r\n    const [qty, setQty] = useState(1)\r\n    const [rating, setRating] = useState(0)\r\n    const [comment, setComment] = useState(\"\")\r\n\r\n    const productDetails = useSelector(state => state.productDetails)\r\n    // state ---- reducer ---- loading, error, product\r\n    const {loading, error, product} = productDetails // destruction a good way to extra data \r\n\r\n    const productCreateReview = useSelector(state => state.productCreateReview)\r\n    // state ---- reducer ---- loading, error, product\r\n    const {success: successProductReview, error: errorProductReview, } = productCreateReview // destruction a good way to extra data \r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    // state ---- reducer ---- loading, error, product\r\n    const { userInfo } = userLogin // destruction a good way to extra data \r\n\r\n    useEffect( ()=> {\r\n        // const fetchProduct = async () => {const {data} = await axios.get(`/api/products/${match.params.id}`); setProduct(data)}\r\n        // fetchProduct();\r\n        if (successProductReview) {\r\n            alert(\"Review Submitted\")\r\n            setRating(0)\r\n            setComment(\"\")\r\n            dispatch({type: PRODUCT_CREATE_REVIEW_RESET})\r\n        }\r\n\r\n        dispatch(listProductDetails(match.params.id))\r\n    }, [match, dispatch, successProductReview])\r\n\r\n    // const product = products.find(product => product._id === match.params.id)\r\n\r\n    const addToCartHandler = () => {\r\n        console.log(\"start Redirecting to cart page\")\r\n        history.push(`/cart/${match.params.id}?qty=${qty}`)\r\n    }\r\n\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault()\r\n        dispatch(createProductReview(match.params.id, {rating, comment}))\r\n    }\r\n\r\n    \r\n    return (\r\n        \r\n        <div>\r\n           \r\n            <Link className = \"btn btn-light my-3\" to=\"/\"> Go Back </Link>\r\n\r\n            {loading? <Loader/> : error? <Message variant=\"danger\"> {error} </Message> : (\r\n                <>\r\n                <Meta title={product.name}/>\r\n                <Row>\r\n                <Col md={6}>\r\n                    <Image src={product.image} alt={product.name} fluid/>\r\n                </Col>\r\n\r\n                <Col md={3}>\r\n                    <ListGroup variant = \"flush\"> \r\n                        <ListGroup.Item>\r\n                            <h3> {product.name} </h3>\r\n                        </ListGroup.Item>\r\n                        <ListGroup.Item>\r\n                            <Rating value={product.rating} text={`${product.numReviews} reviews`}/>\r\n                        </ListGroup.Item>\r\n                        <ListGroup.Item>\r\n                            Price: ${product.price}\r\n                        </ListGroup.Item>\r\n                        <ListGroup.Item>\r\n                            Description: ${product.description}\r\n                        </ListGroup.Item>\r\n                    </ListGroup>\r\n                </Col>\r\n                \r\n                <Col md={3}>\r\n                    <Card>\r\n                        <ListGroup variant=\"flush\">\r\n                            <ListGroup.Item> \r\n                                <Row>\r\n                                    <Col>\r\n                                        Price:\r\n                                    </Col>\r\n                                    <Col>\r\n                                        <strong> {product.price} </strong>\r\n                                    </Col>\r\n                                </Row>\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item> \r\n                                <Row>\r\n                                    <Col>\r\n                                        Status:\r\n                                    </Col>\r\n                                    <Col>\r\n                                        {product.countInStock > 0? \"In Stock\" : \"Out of Stock\"}\r\n                                    </Col>\r\n                                </Row>\r\n                            </ListGroup.Item>\r\n\r\n                            {product.countInStock > 0 && (\r\n                                <ListGroup.Item>\r\n                                    <Row>\r\n                                        <Col>Qty</Col>\r\n                                        <Col> \r\n                                            <Form.Control as=\"select\" value={qty} onChange={(e)=>{console.log(\"change\"); setQty(Number(e.target.value))}}> \r\n                                                {[...Array(product.countInStock).keys()].map(\r\n                                                    (num) => (<option key={num+1} value={num+1}> \r\n                                                            {num+1}\r\n                                                        </option>))}\r\n                                            </Form.Control>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </ListGroup.Item>\r\n                            )}\r\n\r\n                            <ListGroup.Item>                           \r\n                                <Button \r\n                                className= \"btn-block\" \r\n                                type=\"button\" \r\n                                disabled={product.countInStock === 0}\r\n                                onClick = {addToCartHandler}\r\n                                >\r\n                                    Add to cart\r\n                                </Button> \r\n                            </ListGroup.Item>\r\n                        </ListGroup>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col md={6}>\r\n                    <h2> Reviews </h2>\r\n                    {product.reviews.length === 0 && <Message> No Reviews </Message>}      \r\n                    <ListGroup variant=\"flush\"> \r\n                    <h2> Test </h2>\r\n                            {product.reviews.map(review => \r\n                                    (\r\n                                        <ListGroup.Item key={review._id}>\r\n                                            <strong> {review.name} </strong>\r\n                                            <Rating value={review.rating}> </Rating>\r\n                                            <p> {review.createdAt.substring(0, 10)}  </p>\r\n                                            <p> {review.comment}  </p>\r\n                                        </ListGroup.Item>\r\n                                    )\r\n                            )}\r\n                            <ListGroup.Item>\r\n                                <h2> Write a customer review </h2>\r\n                                {errorProductReview && <Message variant=\"danger\"> {errorProductReview} </Message> }\r\n                                {userInfo? (\r\n                                    <Form onSubmit = {submitHandler}> \r\n                                        <Form.Group controlId=\"rating\">\r\n                                            <Form.Label> Rating </Form.Label>\r\n                                            <Form.Control as=\"select\" value={rating} onChange={e => setRating(e.target.value)}>\r\n                                            \r\n                                                <option value=\"\"> Select... </option>\r\n                                                <option value=\"1\"> 1 - Poor </option>\r\n                                                <option value=\"2\"> 2 - Fair </option>\r\n                                                <option value=\"3\"> 3 - Good </option>\r\n                                                <option value=\"4\"> 4 - Very Good </option>\r\n                                                <option value=\"5\"> 5 - Excellent </option>\r\n\r\n                                            </Form.Control>\r\n                                        </Form.Group>\r\n                                        <Form.Group controlId=\"comment\">\r\n                                            <Form.Label> Comment </Form.Label>\r\n                                            <Form.Control as=\"textarea\" row=\"3\" value={comment} onChange = {(e)=>{setComment(e.target.value)}}> Comment </Form.Control>\r\n                                        </Form.Group>\r\n                                        <Button type=\"submit\" variant=\"primary\"> Submit Reivews </Button>\r\n                                    </Form>) :\r\n                                (<Message> Please <Link to=\"/login\"> sign in </Link> to write a review {''} </Message> )}\r\n                            </ListGroup.Item>\r\n                    </ListGroup>                              \r\n                </Col>\r\n            </Row>\r\n            </>\r\n            )}\r\n    \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProductScreen\r\n\r\n\r\n// The match object in router case\r\n// import is more like file path\r\n// to is url\r\n// In react, when you talk about src, it means something in the public folder"]},"metadata":{},"sourceType":"module"}