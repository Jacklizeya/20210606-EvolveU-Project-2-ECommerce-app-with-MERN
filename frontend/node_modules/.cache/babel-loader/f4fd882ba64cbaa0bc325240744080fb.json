{"ast":null,"code":"import _toConsumableArray from\"/home/jack/Desktop/Software Codebase/20210514 E-Commerce Version1/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from'react';import{useDispatch,useSelector}from\"react-redux\";import Message from\"../components/Message\";import{Link}from\"react-router-dom\";import{Row,Col,ListGroup,Image,Form,Button,Card}from\"react-bootstrap\";import{addToCart,removeFromCart}from\"../actions/cartAction\";// The match variable it available to this component, not needs to explicitly passing it\n// To the screen, does match means the URL?\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(_ref){var match=_ref.match,location=_ref.location,history=_ref.history;var productId=match.params.id;var qty=location.search?location.search.split(\"=\")[1]:1;var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;var dispatch=useDispatch();useEffect(function(){if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeFromCartHandler=function removeFromCartHandler(id){console.log(\"trying to remove\");console.log(id);dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){console.log(\"checkout\");history.push(\"/login?redirect=shipping\");};//  login is true? redirect\n//  login is false, then login\nreturn/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{children:[\" Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\" Go Back\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:2,children:[\" \",/*#__PURE__*/_jsx(Image,{src:item.image,alt:\"item.name\",fluid:true,rounded:true}),\" \"]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\" \",/*#__PURE__*/_jsxs(Link,{to:\"/product/\".concat(item.product),children:[\" \",item.name,\" \"]})]}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\" \",item.price,\" \"]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(num){return/*#__PURE__*/_jsx(\"option\",{value:num+1,children:num+1},num+1);})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsxs(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"}),\" \"]})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,item){return acc+Number(item.qty);},0),\") items \"]}),\"$\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\" Proceed to Checkout \"})})]})})})]});}","map":{"version":3,"sources":["/home/jack/Desktop/Software Codebase/20210514 E-Commerce Version1/frontend/src/screens/CartScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Message","Link","Row","Col","ListGroup","Image","Form","Button","Card","addToCart","removeFromCart","CartScreen","match","location","history","productId","params","id","qty","search","split","cart","state","cartItems","dispatch","removeFromCartHandler","console","log","checkoutHandler","push","length","map","item","image","product","name","price","e","Number","target","value","Array","countInStock","keys","num","reduce","acc","toFixed"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react'\n\nimport {useDispatch, useSelector} from \"react-redux\" \nimport Message from \"../components/Message\"\nimport {Link} from \"react-router-dom\"\nimport {Row, Col, ListGroup, Image, Form, Button, Card} from \"react-bootstrap\"\nimport {addToCart, removeFromCart} from \"../actions/cartAction\" \n\n\n\n// The match variable it available to this component, not needs to explicitly passing it\n// To the screen, does match means the URL?\nexport default function CartScreen({match, location, history}) {\n    const productId = match.params.id\n    const qty = location.search? location.search.split(\"=\")[1] : 1\n\n    const cart = useSelector(state => state.cart)\n    const {cartItems} = cart\n\n    const dispatch = useDispatch()\n    useEffect(()=>{\n        if (productId) {dispatch(addToCart(productId, qty))}\n    }, [dispatch, productId, qty])\n\n    const removeFromCartHandler = (id) => {\n        console.log(\"trying to remove\")\n        console.log(id)\n        dispatch(removeFromCart(id))\n    }\n\n    const checkoutHandler = () => {console.log(\"checkout\")\n        history.push(\"/login?redirect=shipping\")\n    }\n\n//  login is true? redirect\n//  login is false, then login\n \n\n    return (\n        <Row>\n            <Col md={8}>\n                <h1> Shopping Cart</h1>\n                {cartItems.length === 0? <Message> Your cart is empty <Link to=\"/\"> Go Back</Link></Message>: (\n                    <ListGroup variant=\"flush\">\n                        {cartItems.map(item => (\n                            <ListGroup.Item key={item.product}>\n                                <Row>\n                                    <Col md={2}> <Image src={item.image} alt=\"item.name\" fluid rounded /> </Col>\n                                    <Col md={3}> <Link to={`/product/${item.product}`}> {item.name} </Link></Col>\n                                    <Col md={2}> {item.price} </Col>\n                                    <Col md={2}> \n                                        <Form.Control as=\"select\" value={item.qty} onChange={(e)=>{dispatch(addToCart(item.product, Number(e.target.value)))}}> \n                                        {\n                                            [...Array(item.countInStock).keys()].map(\n                                              (num) => (<option key={num+1} value={num+1}> \n                                                {num+1}\n                                            </option>))}\n                                        </Form.Control> \n                                    </Col>\n                                    <Col md={2} >\n                                        <Button type=\"button\" variant=\"light\" onClick={()=>removeFromCartHandler(item.product)}> <i className = \"fas fa-trash\"></i> </Button>\n                                        \n                                    </Col>\n                                </Row>\n                            </ListGroup.Item>\n                        ))}\n                    </ListGroup>\n                )}\n            </Col>\n\n            <Col md={4}> \n                <Card>\n                    <ListGroup variant=\"flush\">\n                        <ListGroup.Item>\n                            <h2>Subtotal ({cartItems.reduce((acc, item) => acc + Number(item.qty), 0)}) items </h2>    \n                            ${cartItems.reduce((acc, item)=> acc + item.qty * item.price, 0).toFixed(2)}                \n                        </ListGroup.Item>\n                        <ListGroup.Item>\n                            <Button type=\"button\" className=\"btn-block\" disabled={cartItems.length === 0} onClick={checkoutHandler}> Proceed to Checkout </Button>\n                        </ListGroup.Item>\n                    </ListGroup>\n                </Card>\n            </Col>\n            \n        </Row>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}