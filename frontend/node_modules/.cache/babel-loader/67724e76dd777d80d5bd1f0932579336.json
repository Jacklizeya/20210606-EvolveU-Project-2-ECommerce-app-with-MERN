{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from\"react-router-bootstrap\";import{Table,Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import Message from\"../components/Message\";import Loader from\"../components/Loader\";import{listAllOrders}from\"../actions/orderAction\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function OrderListScreen(_ref){var history=_ref.history;console.log(\"Order List Screen\");var dispatch=useDispatch();//    introduce global variables into this screen\nvar orderListAll=useSelector(function(state){return state.orderListAll;});var loading=orderListAll.loading,error=orderListAll.error,orders=orderListAll.orders;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;//  Not even allowed to stay on that page\nuseEffect(function(){if(userInfo&&userInfo.isAdmin){console.log(\"list orders please\");dispatch(listAllOrders());}else{console.log(\"going to login page\");history.push(\"/login\");}},[history,dispatch,userInfo]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Orders \"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\" \",error,\" \"]}):/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\" ID \"}),/*#__PURE__*/_jsx(\"th\",{children:\" USER \"}),/*#__PURE__*/_jsx(\"th\",{children:\" DATE \"}),/*#__PURE__*/_jsx(\"th\",{children:\" TOTAL Price \"}),/*#__PURE__*/_jsx(\"th\",{children:\" PAID \"}),/*#__PURE__*/_jsx(\"th\",{children:\" DELIVERED \"}),/*#__PURE__*/_jsx(\"th\",{children:\"  \"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(order){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[\" \",order._id]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",order.user&&order.user.name,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",order.createdAt.substring(0,10),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" $\",order.totalPrice,\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",order.isPaid?order.paidAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:\"red\"}}),\" \"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",order.isDelivered?order.deliveredAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:\"red\"}}),\" \"]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"/order/\".concat(order._id),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:\" Details \"})})})]},order._id);})})]})]});}","map":{"version":3,"sources":["/home/jack/Desktop/Software Codebase/20210514 E-Commerce Version1/3d2021store/frontend/src/screens/OrderListScreen.js"],"names":["React","useEffect","LinkContainer","Table","Button","useDispatch","useSelector","Message","Loader","listAllOrders","OrderListScreen","history","console","log","dispatch","orderListAll","state","loading","error","orders","userLogin","userInfo","isAdmin","push","map","order","_id","user","name","createdAt","substring","totalPrice","isPaid","paidAt","color","isDelivered","deliveredAt"],"mappings":"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","sourcesContent":["import React, { useEffect} from 'react'\n \nimport {LinkContainer} from \"react-router-bootstrap\"\nimport {Table, Button} from \"react-bootstrap\"\nimport {useDispatch, useSelector} from \"react-redux\"\nimport Message from \"../components/Message\"\nimport Loader from \"../components/Loader\"\nimport {listAllOrders} from \"../actions/orderAction\"\n\n\n\n\nexport default function OrderListScreen({history}) {\n    console.log(\"Order List Screen\")\n    \n    const dispatch = useDispatch()\n\n    //    introduce global variables into this screen\n    const orderListAll = useSelector(state => state.orderListAll)\n    const {loading, error, orders} = orderListAll\n\n    const userLogin = useSelector(state => state.userLogin)\n    const {userInfo} = userLogin\n\n    \n//  Not even allowed to stay on that page\n    useEffect(()=>{if (userInfo && userInfo.isAdmin) {\n        console.log(\"list orders please\")\n        dispatch(listAllOrders())} else { console.log(\"going to login page\"); history.push(\"/login\")}}, \n        [history, dispatch, userInfo])\n\n\n    return (\n        <div>\n        <h1> Orders </h1>\n        {loading? <Loader/> : error? <Message variant=\"danger\"> {error} </Message> : (\n            <Table striped bordered hover responsive className=\"table-sm\">\n                <thead>\n                    <tr>\n                        <th> ID </th>\n                        <th> USER </th>\n                        <th> DATE </th>\n                        <th> TOTAL Price </th>\n                        <th> PAID </th>\n                        <th> DELIVERED </th>\n                        <th>  </th>\n                    </tr>\n                </thead>\n                <tbody>\n                    {orders.map((order)=>{return (\n                    <tr key={order._id}>\n                        \n                        <td> {order._id}</td>\n                        <td> {order.user && order.user.name} </td>\n                        <td> {order.createdAt.substring(0, 10)} </td>\n                        <td> ${order.totalPrice} </td>\n                        <td> {order.isPaid? (order.paidAt.substring(0, 10)):(<i className = \"fas fa-times\" style={{color: \"red\"}}></i>)} </td>\n                        <td> {order.isDelivered? (order.deliveredAt.substring(0, 10)):(<i className = \"fas fa-times\" style={{color: \"red\"}}></i>)} </td>    \n                        <td>\n                            <LinkContainer to={`/order/${order._id}`}> \n                            <Button variant=\"light\" className=\"btn-sm\"> Details </Button>\n                            </LinkContainer>\n                        </td>\n                    </tr>\n                    )})}\n                </tbody>\n            </Table>\n            ) }\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}